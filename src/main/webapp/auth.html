<!DOCTYPE html>
<html>
    <head>
        <title>トークン発行API呼出</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="./scripts/jquery-1.10.2.min.js"></script>
        <script type="text/javascript">
        <!--
            function doAction() {
                // リクエストパラメータ作成
                var request = {
                   emp_no: $("#emp_no").val(),
                   password: $("#password").val()
                };
                $("#request_param").val(JSON.stringify(request, null, "    "));
                
                // API呼出
                var host = $('input[name=host]:checked').val();
                var url = 'http://' + host + '/KotsuhiSeisanApi/resources/application/auth';
                $.ajax({
                    type: 'POST',
                    url: url,
                    data: JSON.stringify(request),
                    contentType: 'application/json',
                    dataType: 'JSON',
                    scriptCharset: 'utf-8',
                    success: function(data) {
                        alert("success");
                        $("#response_param").val(JSON.stringify(data, null, "    "));
                    },
                    error: function(data) {
                        alert("error");
                        $("#response_param").val(JSON.stringify(data, null, "    "));
                    }
                });
            }
        // -->
        </script>
    </head>
    <body>
        <h3>トークン発行API呼出</h3>
        <hr>
        <table>
            <tr>
                <td>接続先</td>
                <td>
                    <input type="radio" name="host" value="localhost:8080" checked="checked">ローカル
                    <input type="radio" name="host" value="18.205.184.174:8080">AWS EC2
                </td>
            </tr>
            <tr>
                <td>社員番号</td>
                <td><input type="text" id="emp_no" /></td>
            </tr>    
            <tr>
                <td>パスワード</td>
                <td><input type="text" id="password" /></td>
            </tr>    
        </table>
        <input type="button" value="API呼出" onclick="doAction()" />
        <hr>
        リクエストパラメータ(JSON)<br>
        <textarea id="request_param" rows="8" cols="50"></textarea><br>
        レスポンスパラメータ(JSON)<br>
        <textarea id="response_param" rows="8" cols="50"></textarea><br>
        <a href="index.html">戻る</a>
    </body>
</html>
